
# Introduction to IPv6 #

IPv6 is the successor to IPv4. IPv6 addresses are 128 bits long ( compared with IPv4's 32 bits). For easy representation, an IPv6 address is divided into 8 16 bit hexadecimal numbers, for example

**2001:0470:1f08:1b61:725a:b6ff:fe30:cf08**

If the hexadecimal block starts with a zero, the leading zero can be omitted.
Also note that the hexadecimal digits are case-sensitive.
If an entire block or ( continuous sequence of blocks ) is zero, it can be omitted and represented with an extra colon ( : ). For example

2001:470:1f08:1b61:0000:0000:0000:0054

can be represented

2001:470:1f08:1b61::54

Refer to [RFC 5953](http://tools.ietf.org/html/rfc5952) for other acceptable methods of representation.

A rather weird method of representation is also given in [RFC 1924](http://tools.ietf.org/html/rfc1924).


## Address types ##

There are many categories of IPv6 addresses, however, since this is just a "basic tutorial", we'll consider a few important ones :

### Localhost address ###
Like IPv4's 127.0.0.1, in IPv6, the localhost address is 0000:0000:0000:0000:0000:0000:0000:0001 , or in simpler way ::1

### Link local address type ###

These begin with fe8x: , usually fe80: . Addresses beginning with fe9x:, feax: and febx also belong to this category though these prefixes aren't in use at the moment.

e.g fe80::725a:b6ff:fe30:cf08

### Multicast Address type ###

These begin with ffxy:

The multicast address type is further divided into scopes as defined in [RFC 2373](http://www.ietf.org/rfc/rfc2373.txt). The currently defined scopes are :

ffx1: node-local


ffx2: link-local


ffx5: site-local


ffx8: organization-local


ffxe: global scope.


i.e ffx1 addresses never leave the node , ffx2 addresses never leave the link ( are never forwarded by routers ) etc.

### Global address type ###

These begin with 2xxx: or 3xxx: e.g 2a00:1450:400b:c00::63
These are globally routable IP addresses and are given by ISPs.

For info on other address types, refer to
http://tldp.org/HOWTO/Linux+IPv6-HOWTO/x513.html


## Structure of an IPv6 address ##


Usually an IPv6 address is divided into two parts, each of 64 bits
Router Prefix - This is used for routing

Host address	-This identifies a host in the network

For example 2001:470:1f08:1b61:725a:b6ff:fe30:cf08

Router Prefix - 2001:470:1f08:1b61

Host address  - 725a:b6ff:fe30:cf08

For a Link Local address fe80::725a:b6ff:fe30:cf08

Router Prefix - fe80:0000:0000:0000

Host address  - 725a:b6ff:fe30:cf08

The host address is computed automatically from the mac address of the host - This is known as stateless configuration or EUI-64 method. The host address can also be randomly generated by the host or can be manually assigned.

For example, if the mac address of the host interface is 70:5a:b6:30:cf:0c, the host address is computed as 725a:b6ff:fe30:cf08

To know more on EUI-64 method refer to http://standards.ieee.org/regauth/oui/tutorials/EUI64.html
### Subnetting ###
Similar to IPv4 subnetting except that IPv6 address spaces are much larger. The most commonly used subnet mask is /64 for reasons explained above.

Other Subnet masks used ( albeit rarely ) are /48 , /56 etc

To completely specify an IPv6 address, it is advisable to include the subnet mask.
> e.g  2001:470:1f08:1b61:725a:b6ff:fe30:cf08/64


## IPv6 Routing ##

Routing in IPv6 is very similar to IPv4 routing under [CIDR](http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) with the exception that IPv6 addresses are 128 bits long while IPv4 addresses are 32-bits long.

As mentioned above, the first 64 bits of an IPv6 address are used for routing while the last 64 uniquely identify a host.


### Router Advertisement Daemon ###

In the "Automatic/stateless" address assignment, the router prefix is usually advertised on the network by a router advertisement daemon such as radvd. Hosts in the network only need to pick the route prefix (64 bits long) and will then form the complete address by concatenating their host addresses (computed from the MAC address)
The router advertisement daemon can also send information such as the default gateway, other routes, MTU ,default hoplimit and router lifetime.

Note that when you use radvd, your default route might appear not to be in the same subnet as your assigned ip address : Relax, by default, routes are assigned to link-local addresses. so while your ip address might be a 2001:xxxx::xx , your default route will be a fe80::xxxx:xxxx

Read http://tldp.org/HOWTO/Linux+IPv6-HOWTO/hints-daemons-radvd.html for info on how to configure radvd

## Setting up a SIT IPv6 tunnel ##

If your ISP does not provide you with a native IPv6 address, don't lose hope - you can still get IPv6 connectivity via a Simple-Internet-Transition tunnel (SIT tunnel).

If you are on a public IP address (IPv4), the easiest way to setup a SIT tunnel is through a tunnel broker such as hurricane electric ( http://www.tunnelbroker.com ).
You'll be required to create an account with them, after which you should be able to setup up to 5 tunnels.

Assuming, you've registered with http://www.tunnelbroker.com and assuming that you're using a linux computer, the procedure for setting up a SIT tunnel is:

`ip tunnel add tun0 mode sit remote <remote-address> local <local-address> ttl 255`

e.g

`ip tunnel add tun0 mode sit remote 216.66.80.26 local 41.204.176.75 ttl 255`

where tun0 is the name of your tunnel, 216.66.80.26 is the remote end of the tunnel (check your tunnel details for the remote end address) and 41.204.176.75 is your global IPv4 address.

Set up the tunnel with

`ip link set tun0 up`

Give your tunnel an IPv6 address

e.g

`ip -6 addr add <IPv6 address> dev tun0`

`ip -6 addr add 2001:470:1f08:1b88::2/64 dev tun0`

Give your ethernet port an IP address too

e.g

`ip -6 addr add 2001:470:1f08:1b88::3/64 dev eth0`

Now to setup the default route for IPv6 requests, use

`ip -6 route add ::/0 dev tun0`

Test if your IPv6 connection works by pinging another IPv6 host, e.g

`ping6 2a00:1450:400b:c00::63`

if you get a reply, congratulations - you now have IPv6 connectivity, else, try again :-(

## Setting up an AYIYA IPv6 tunnel ##

n.b - For those behind a NAT firewall, check out [AYIYA](https://www.sixxs.net/tools/ayiya/)





## Tools to use with IPv6 ##

Most of the commonly used networking tools ( including RJ45 crimping tool ) work with ipv6 albeit with some slight variations. Below is a summary of some of the tools you're likely to use , and the modifications needed for ipv6.

**Ping** - largely depends on your system. In Ubuntu linux, use `ping6` instead of the "normal" ping. In openwrt, when pinging an IPv6 address, use `ping -6`

**traceroute** - Use `traceroute6`

**ip** - Most ip commands work with IPv6 except that you need a `-6` switch after `ip`

e.g

To add a route

`ip -6 route add <destination> via <router>`

note the -6 after ip

To view the your IPv6 routing table in linux use

`route -A inet6`

`ip -6 route show`


**iptables** - Install and use `ip6tables` for IPv6 filtering

**tcpdump**  - To capture IPv6 traffic the option ip6 needs to be specified. `tcpdump ip6 <expression>`

**iperf**  -  Add -V . e.g `iperf -s -V` on the server side

`iperf -c -V <server address>` On client side



## Tips ##

Always put square brackets around an ipv6 address when using most programs e.g scp, firefox.

References

http://en.wikipedia.org/wiki/IPv6

http://tldp.org/HOWTO/Linux+IPv6-HOWTO/

http://docwiki.cisco.com/wiki/IPv6